<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Video Generator PRO</title>
<style>
body{
    margin:0;
    font-family:Arial;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color:white;
    text-align:center;
}
h1{
    padding:20px;
}
.container{
    padding:20px;
}
input, select, button{
    margin:8px;
    padding:8px;
    border-radius:8px;
    border:none;
}
button{
    background:#00c6ff;
    color:white;
    cursor:pointer;
}
button:hover{
    background:#0072ff;
}
canvas{
    margin-top:20px;
    background:black;
    border-radius:15px;
}
</style>
</head>
<body>

<h1>ðŸŽ¥ AI Video Generator PRO</h1>

<div class="container">

<input type="file" id="images" accept="image/*" multiple><br>

<input type="file" id="music" accept="audio/*"><br>

<input type="text" id="videoText" placeholder="Teks otomatis AI"><br>

<select id="filter">
<option value="none">Normal</option>
<option value="cinematic">Cinematic</option>
<option value="bw">Black & White</option>
<option value="warm">Warm Tone</option>
</select><br>

<label>Durasi per gambar (detik): </label>
<input type="number" id="duration" value="3"><br>

<button onclick="generateVideo()">Generate Video PRO</button>

<br><br>
<video id="resultVideo" controls></video>

</div>

<canvas id="canvas" width="720" height="480"></canvas>

<script>
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let images = [];
let audio = new Audio();

document.getElementById("images").addEventListener("change", function(e){
    images = [];
    Array.from(e.target.files).forEach(file=>{
        let reader = new FileReader();
        reader.onload = function(event){
            let img = new Image();
            img.src = event.target.result;
            images.push(img);
        }
        reader.readAsDataURL(file);
    });
});

document.getElementById("music").addEventListener("change", function(e){
    let file = e.target.files[0];
    let reader = new FileReader();
    reader.onload = function(event){
        audio.src = event.target.result;
    }
    reader.readAsDataURL(file);
});

function applyFilter(type){
    if(type === "cinematic") ctx.filter = "contrast(120%) brightness(90%) saturate(120%)";
    else if(type === "bw") ctx.filter = "grayscale(100%)";
    else if(type === "warm") ctx.filter = "sepia(60%) saturate(120%)";
    else ctx.filter = "none";
}

function generateVideo(){
    let duration = parseInt(document.getElementById("duration").value);
    let text = document.getElementById("videoText").value;
    let filter = document.getElementById("filter").value;

    let stream = canvas.captureStream(30);
    let recorder = new MediaRecorder(stream);
    let chunks = [];

    recorder.ondataavailable = e => chunks.push(e.data);
    recorder.onstop = ()=>{
        let blob = new Blob(chunks,{type:"video/webm"});
        let url = URL.createObjectURL(blob);
        document.getElementById("resultVideo").src = url;
    };

    recorder.start();
    audio.play();

    let index = 0;
    let startTime = Date.now();

    function animate(){
        let elapsed = (Date.now() - startTime)/1000;

        if(index >= images.length){
            recorder.stop();
            audio.pause();
            return;
        }

        let img = images[index];

        if(elapsed > duration){
            index++;
            startTime = Date.now();
        }

        ctx.clearRect(0,0,canvas.width,canvas.height);
        applyFilter(filter);

        let zoom = 1 + elapsed*0.05;
        let w = canvas.width*zoom;
        let h = canvas.height*zoom;

        ctx.drawImage(img, -(w-canvas.width)/2, -(h-canvas.height)/2, w, h);

        ctx.filter = "none";

        ctx.fillStyle="white";
        ctx.font="30px Arial";
        ctx.fillText(text, 40, canvas.height-40);

        requestAnimationFrame(animate);
    }

    animate();
}
</script>

</body>
</html>
